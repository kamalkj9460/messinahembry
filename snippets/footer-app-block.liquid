<div id="shopify-block-17987146178959213818" class="shopify-block shopify-app-block"> 
 
   <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5MX62M8"  height="0" width="0" style="display:none;visibility:hidden"></iframe>
   </noscript>
  
<!-- BEGIN app snippet: master-datalayer --><script type="lazyload_int">
if (!cip) {
  let cip = localStorage.getItem("cip");
  if (!cip) {
    fetch('https://api.ipify.org?format=json')
      .then(response => response.json())
      .then(data => { localStorage.setItem("cip", data.ip); });
  }
}

 function c_pt(string) {
 const utf8 = new TextEncoder().encode(string);
 return crypto.subtle.digest('SHA-256', utf8).then((hashBuffer) => {
   const hashArray = Array.from(new Uint8Array(hashBuffer));
   const hashHex = hashArray
     .map((bytes) => bytes.toString(16).padStart(2, '0'))
     .join('');
   return hashHex;
 });
}
function c_time() {  return Math.floor(Date.now() / 1000) }

function c_rn() {  return Math.floor(Math.random() * c_time() * c_time()); }

if (typeof ev_data_vc === 'undefined') {
let ev_data_vc = {
   "data": [{
       "event_name": "ViewContent",
       "event_time": c_time(),
       "event_id": "e_id" + c_rn(),
       "action_source": "website",
       "event_source_url": document.location.href ,
       "user_data": {
            "client_ip_address": cip,
            "client_user_agent": "Online store",
       }
   }]
};

let ev_data_vp = {
   "data": [{
       "event_name": "PageView",
       "event_time": c_time(),
       "event_id": "e_id" + c_rn(),
       "action_source": "website",
       "event_source_url": document.location.href ,
       "user_data": {
            "client_ip_address": cip,
            "client_user_agent": "Online store",
       }
   }]
};

function cfbcpi(cdt) {
    

   fetch('https://graph.facebook.com/v16.0/clearmeta/events', {
       method: 'POST',
       headers: {
           'Content-Type': 'application/json',
           'Accept': 'application/json',
           'Authorization': 'Bearer undefined'
       },
       body: JSON.stringify(cdt)
   }).then(response=>response.json()).then().catch(error=>console.log(error))

}
if(document.location.pathname == "/"){
    cfbcpi(ev_data_vc);
}
cfbcpi(ev_data_vp);
// end fbcapi
    function getDiff(cart_item, cart_remove) {
  return cart_item.items.filter(item=>{
      let isDifferent = true;
      cart_remove.items.forEach(removeItem=>{
          if (item.item_variant_id === removeItem.item_variant_id) {
              isDifferent = false;
          }
      }
      );
      return isDifferent;
  }
  );
}
  }
    if(!window.jQuery){
         var jqueryScript = document.createElement('script');
         jqueryScript.setAttribute('src','https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js');
         document.head.appendChild(jqueryScript);
     }

     __DL__jQueryinterval = setInterval(function(){
         if(window.jQuery){
             getURLParams = function(name, url){
                 if (!url) url = window.location.href;
                 name = name.replace(/[\[\]]/g, "\\$&");
                 var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                 results = regex.exec(url);
                 if (!results) return null;
                 if (!results[2]) return '';
                 return decodeURIComponent(results[2].replace(/\+/g, " "));
             };
             __DL__ = { dynamicCart: true, debug: false, cart: null, wishlist: null, removeCart: null };

             customBindings = {
                 cartTriggers: [],
                 viewCart: [],
                 removeCartTrigger: [],
                 cartVisableSelector: [],
                 promoSubscriptionsSelectors: [],
                 promoSuccess: [],
                 ctaSelectors: [],
                 newsletterSelectors: [],
                 newsletterSuccess: [],
                 searchPage: [],
                 wishlistSelector: [],
                 removeWishlist: [],
                 wishlistPage: [],
                 checkoutSelectors: [],
                 selectProduct: [],
                 searchTermQuery: [getURLParams('q')], // replace var with correct query
             };

             /* DO NOT EDIT */
             defaultBindings = {
                 cartTriggers: ['form[action="/cart/add"] [type="submit"],.add-to-cart,.cart-btn'],
                 viewCart: ['form[action="/cart"],.my-cart,.trigger-cart,#mobileCart'],
                 removeCartTrigger: ['[href*="/cart/change?"]'],
                 cartVisableSelector: ['.inlinecart.is-active,.inline-cart.is-active'],
                 promoSubscriptionsSelectors: [],
                 promoSuccess: [],
                 ctaSelectors: [],
                 newsletterSelectors: ['input.contact_email'],
                 newsletterSuccess: ['.success_message'],
                 searchPage: ['search'],
                 wishlistSelector: [],
                 removeWishlist: [],
                 selectProduct: ['.product-card'],
                 checkoutSelectors: ['[name="checkout"], .checkout, .checkout-btn, .shopify-payment-button__button'],
                 wishlistPage: []
             };

             // stitch bindings
             objectArray = customBindings;
             outputObject = __DL__;

             applyBindings = function(objectArray, outputObject){
                 for (var x in objectArray) {
                     var key = x;
                     var objs = objectArray[x];
                     values = [];
                     if(objs.length > 0){
                         values.push(objs);
                         if(key in outputObject){
                             values.push(outputObject[key]);
                             outputObject[key] = values.join(", ");
                         }else{
                             outputObject[key] = values.join(", ");
                         }
                     }
                 }
             };

             applyBindings(customBindings, __DL__);
             applyBindings(defaultBindings, __DL__);
             clearInterval(__DL__jQueryinterval);


             if(__DL__.debug){   console.log('Page Template: {{ template.name }}'); }

             window.dataLayer = window.dataLayer || [];
             var template = "{{ template.name }}";


             /** COV DL : Product List Page (Collections, Category)
             * Fire on all product listing pages. */

             


             

                 /** COV DL : Product Page
                 * Fire on all Product View & collection pages add_to_cart use this payload. */

                 if (template.match(/.*product.*/gi) && !template.match(/.*collection.*/gi)) {

                     sku = '';
                     
                     var product = {
                         'products': [{
                             'item_id' :  "null",
                             'item_name': null,
                             'currency'   : "GBP",
                             'price' : "", 
                             
                             
                             

                         }]
                     };

                     function productView(){
                         var sku = null;
                             if(__DL__.debug){
                                 console.log("Product view"+" :"+JSON.stringify(product, null, " "));
                             }
                         }
                         productView();

                         $(__DL__.cartTriggers).click(function(){
                             var skumatch = null;
                             if(sku != skumatch){
                                 productView();
                             }
                         });
                     }

                     /** COV DL : Cart View  Fire anytime a user views their cart (non-dynamic) */

                     

                     /**
                     * DATALAYER Variable
                     * Checkout & Transaction Data */

                     __DL__products = [];

                     
                     transactionData = {
                         'transactionNumber'      : null,
                         'transactionId'          : null,
                         'transactionAffiliation' : "Messina Hembry",
                         'transactionTotal'       : "",
                         'transactionTax'         : "",
                         'transactionShipping'    : "",
                         'transactionSubtotal'    : "",
                         

                         'products': __DL__products
                     };

                     if(__DL__.debug == true){

                         /** COV DL : Transaction */
                         if(document.location.pathname.match(/.*order.*/g)||document.location.pathname.match(/.*thank\_you.*/g)){
                             dataLayer.push(transactionData,{
                                 'pageType' :'Transaction',
                                 'event'    :'Transaction'
                             });
                             console.log("Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                         }
                     }

                     /** COV DL : Checkout */
                     if(Shopify.Checkout){
                         if(Shopify.Checkout.step){
                             if(Shopify.Checkout.step.length > 0){
                                 if (Shopify.Checkout.step === 'contact_information'){
                                     dataLayer.push(transactionData,{
                                         'event'    :'Customer Information',
                                         'pageType' :'Customer Information'});
                                         console.log("Customer Information - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                     }else if (Shopify.Checkout.step === 'shipping_method'){
                                         dataLayer.push(transactionData,{
                                             'event'    :'Shipping Information',
                                             'pageType' :'Shipping Information'});
                                             console.log("Shipping - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                         }else if( Shopify.Checkout.step === "payment_method" ){
                                             dataLayer.push(transactionData,{
                                                 'event'    :'Add Payment Info',
                                                 'pageType' :'Add Payment Info'});
                                                 console.log("Payment - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                             }
                                         }

                                         if(__DL__.debug == true){
                                             /** COV DL : Transaction */
                                             if(Shopify.Checkout.page == "thank_you"){
                                                 dataLayer.push(transactionData,{
                                                     'pageType' :'Transaction',
                                                     'event'    :'Transaction'
                                                 });
                                                 console.log("Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                             }
                                         }else{
                                             /** COV DL : Transaction */
                                             if(Shopify.Checkout.page == "thank_you"){
                                                 dataLayer.push(transactionData,{
                                                     'pageType' :'Transaction',
                                                     'event'    :'Transaction'
                                                 });
                                             }
                                         }
                                     }
                                 }


                                 console.log('COV DATALAYER: DataLayer Loaded..');

                                 /**********************
                                 * DATALAYER EVENT BINDINGS
                                 ***********************/

                                 /** COV DL :
                                 * Add to Cart / Dynamic Cart View
                                 * Fire all pages trigger after all additional dataLayers have loaded. */

                                 $(document).ready(function() {

                                     /** COV DL : Search Results */

                                     var searchPage = new RegExp(__DL__.searchPage, "g");
                                     if(document.location.pathname.match(searchPage)){
                                         var search = {
                                             'searchTerm' : __DL__.searchTermQuery,
                                             'pageType'   : "Search",
                                             'event'      : "Search"
                                         };

                                         dataLayer.push(search);
                                         if(__DL__.debug){
                                             console.log("Search"+" :"+JSON.stringify(search, null, " "));
                                         }
                                     }

                                     /** COV DL : Cart */

                                     // stage cart data
                                     function mapJSONcartData(){
                                         jQuery.getJSON('/cart.js', function (response) {
                                             // get Json response
                                             __DL__.cart = response;
                                             var cart = {
                                                 'products': __DL__.cart.items.map(function (line_item) {
                                                     return {
                                                         'item_id'       :  +'"'+line_item.id+'"',
                                                         'item_name'     : line_item.title,
                                                         'price'    : (line_item.price/100),
                                                         'quantity' : line_item.quantity,
                                                         'coupon' : null,
                                                         'currency'  : "GBP",
                                                      }
                                                 }),
                                                 'event' : 'view_cart'
                                             };
                                             if(cart.products.length > 0){
                                                 dataLayer.push(cart);
                                                 if (__DL__.debug) {
                                                     console.log("Cart"+" :"+JSON.stringify(cart, null, " "));
                                                 }
                                             }
                                         });
                                     }

                                     viewcartfire = 0;

                                     // view cart
                                     $(__DL__.viewCart).on('click', function (event) {
                                         if(viewcartfire !== 1){
                                             viewcartfire = 1;
                                             // if dynamic cart is TRUE
                                             if (__DL__.dynamicCart) {
                                                 cartCheck = setInterval(function () {
                                                     // begin check interval
                                                     if ($(__DL__.cartVisableSelector).length > 0) {
                                                         // check visible selectors
                                                         clearInterval(cartCheck);
                                                         mapJSONcartData();
                                                         $(__DL__.removeCartTrigger).on('click', function (event) {
                                                             // remove from cart
                                                             var link = $(this).attr("href");
                                                             jQuery.getJSON(link, function (response) {
                                                                 // get Json response
                                                                 __DL__.removeCart = response;
                                                                 var removeFromCart = {
                                                                     'products': __DL__.removeCart.items.map(function (line_item) {
                                                                         return {
                                                                             'id'       :  +'"'+line_item.id+'"',
                                                                             'variant'  : line_item.variant_id,
                                                                             'name'     : line_item.title,
                                                                             'price'    : (line_item.price/100),
                                                                             'quantity' : line_item.quantity
                                                                         }
                                                                     }),
                                                                     'pageType' : 'remove_from_cart',
                                                                     'event'    : 'remove_from_cart'
                                                                 };
                                                                 dataLayer.push(removeFromCart);
                                                                 if (__DL__.debug) {
                                                                     console.log("Cart views "+" :"+JSON.stringify(removeFromCart, null, " "));
                                                                 }
                                                             });
                                                         });
                                                     }
                                                 }, 500);
                                             }
                                         }
                                     });

                                     // add to cart
                                     jQuery.getJSON('/cart.js', function (response) {
                                         // get Json response
                                         __DL__.cart = response;
                                         var cart = {
                                             'products': __DL__.cart.items.map(function (line_item) {
                                                 return {
                                                     'item_id'       : +'"'+line_item.id+'"',
                                                     'item_name'     : line_item.title,
                                                     'price'    : (line_item.price/100),
                                                     'quantity' : line_item.quantity
                                                 }
                                             })
                                         }
                                         __DL__.cart = cart;
                                         collection_cartIDs = [];
                                         collection_matchIDs = [];
                                         collection_addtocart = [];
                                         for (var i = __DL__.cart.products.length - 1; i >= 0; i--) {
                                             var x = parseFloat(__DL__.cart.products[i].variant);
                                             collection_cartIDs.push(x);
                                         }
                                     });

                                     function __DL__addtocart(){

                                     
                                         if (__DL__.debug) {
                                             console.log("Add to Cart PDP"+" :"+JSON.stringify(product, null, " "));
                                             console.log("Add to Cart PDP"+" :"+typeof(product));
                                             console.log("Add to Cart PDP"+" :"+JSON.stringify(product.products[0], null, " "));
                                         }
                                         //console.log(Object.values(product.products)); // log data
                                         const items = Object.values(product.products);
                                         let eid_act = "e_id" + c_rn();
                                         dataLayer.push({
                                             'event'    : 'add_to_cart',
                                             'fb_event_id' : eid_act,
                                             ecommerce: {
                                                             items: items
                                                        }
                                         });

                                         let ev_act = {"data": [{
                                            "event_name": "Add to cart",
                                            "event_time": c_time(),
                                            "event_id": eid_act,
                                            "action_source": "website",
                                            "event_source_url": document.location.href ,
                                            "user_data": {
                                            "client_ip_address": cip,
                                            "client_user_agent": "Online store",
                                            },
                                            "custom_data" :{
                                                "content_type": "product",
                                                "content_ids": items[0].item_id,
                                                "content_name": items[0].item_name
                                            }
                                        }]
                                        };
                                        cfbcpi(ev_act);

                                         

                                         // if dynamic cart is TRUE
                                         if (__DL__.dynamicCart) {
                                            //  console.log("dynamic");
                                             var cartCheck = setInterval(function () {
                                                 // begin check interval
                                                 if ($(__DL__.cartVisableSelector).length > 0) {
                                                     // check visible selectors
                                                     clearInterval(cartCheck);
                                                     mapJSONcartData();
                                                     $(__DL__.removeCartTrigger).on('click', function (event) {
                                                         // remove from cart
                                                         var link = $(this).attr("href");
                                                         jQuery.getJSON(link, function (response) {
                                                             // get Json response
                                                             __DL__.removeCart = response;
                                                             var removeFromCart = {
                                                                 'products': __DL__.removeCart.items.map(function (line_item) {
                                                                     return {
                                                                         'id'       :  +'"'+line_item.id+'"',
                                                                         'variant'  : line_item.variant_id,
                                                                         'name'     : line_item.title,
                                                                         'price'    : (line_item.price/100),
                                                                         'quantity' : line_item.quantity
                                                                     }
                                                                 }),
                                                                 'pageType' : 'remove_from_cart',
                                                                 'event'    : 'remove_from_cart'
                                                             };
                                                             dataLayer.push(removeFromCart);
                                                             if (__DL__.debug) {
                                                                 console.log("dynamic Cart"+" :"+JSON.stringify(removeFromCart, null, " "));
                                                             }
                                                         });
                                                     });
                                                 }
                                             }, 500);
                                         }
                                     }

                                     $(document).on('click', __DL__.cartTriggers, function() {
                                         __DL__addtocart();
                                     });

                                     /**
                                      * DATALAYER: Newsletter Subscription */
                                     __DL__newsletter_fire = 0;
                                     $(document).on('click', __DL__.newsletterSelectors, function () {
                                         if(__DL__newsletter_fire !== 1){
                                             __DL__newsletter_fire = 1;
                                             var newsletterCheck = setInterval(function () {
                                                 // begin check interval
                                                 if ($(__DL__.newsletterSuccess).length > 0) {
                                                     // check visible selectors
                                                     clearInterval(newsletterCheck);
                                                     dataLayer.push({'event': 'Newsletter Subscription'});
                                                 }
                                             },500);
                                         }
                                     });

                                     /** COV DL : Wishlist */
                                     setTimeout( function(){

                                         $(__DL__.wishlistSelector).on('click', function () {
                                             dataLayer.push(product,
                                                 {'event': 'Add to Wishlist'});
                                                 if(__DL__.debug){
                                                     console.log("Wishlist"+" :"+JSON.stringify(product, null, " "));
                                                 }
                                             });

                                             if(document.location.pathname == __DL__.wishlistPage){
                                                 var __DL__productLinks = $('[href*="product"]');
                                                 var __DL__prods        = [];
                                                 var __DL__links        = [];
                                                 var __DL__count        = 1;

                                                 $(__DL__productLinks).each(function(){
                                                     var href = $(this).attr("href");
                                                     if(!__DL__links.includes(href)){
                                                         __DL__links.push(href);
                                                         $(this).attr("dataLayer-wishlist-item",__DL__count++);
                                                         jQuery.getJSON(href, function (response) {
                                                             // get Json response
                                                             __DL__.wishlist = response;
                                                             var wishlistproducts = {
                                                                 'id'   : __DL__.wishlist.product.id,
                                                                 'name' : __DL__.wishlist.product.title,
                                                             };
                                                             __DL__prods.push(wishlistproducts);
                                                         });
                                                     }
                                                 });

                                                 dataLayer.push({'products': __DL__prods,
                                                 'pageType' : 'Wishlist',
                                                 'event'    : 'Wishlist'});
                                             }

                                             var __DL__count = 1;
                                             var wishlistDel  = $(__DL__.removeWishlist);
                                             wishlistDel.each(function(){
                                                 $(this).attr("dataLayer-wishlist-item-del",__DL__count++);
                                             });

                                             $(__DL__.removeWishlist).on('click', function(){
                                                 console.log('click')
                                                 var index = $(this).attr("dataLayer-wishlist-item-del");
                                                 var link  = $("[dataLayer-wishlist-item="+index+"]").attr("href");
                                                //  console.log(index)
                                                //  console.log(link)
                                                 jQuery.getJSON(link, function (response) {
                                                     // get Json response
                                                     __DL__.wishlist     = response;
                                                     var wishlistproducts = {
                                                         'id'   : __DL__.wishlist.product.id,
                                                         'name' : __DL__.wishlist.product.title,
                                                     };

                                                     dataLayer.push({'products': wishlistproducts,
                                                     'pageType' : 'Wishlist',
                                                     'event'    : 'Wishlist Delete Product'});
                                                 });
                                             })
                                         }, 3000);

                                         /** COV DL : CTAs */
                                         $(__DL__.ctaSelectors).on('click', function () {
                                             var ctaCheck = setInterval(function () {
                                                 // begin check interval
                                                 if ($(__DL__.ctaSuccess).length > 0) {
                                                     // check visible selectors
                                                     clearInterval(ctaCheck);
                                                     dataLayer.push({'event': 'CTA'});
                                                 }
                                             },500);
                                         });

                                         /** COV DL : Promo Subscriptions */
                                         $(__DL__.promoSubscriptionsSelectors).on('click', function () {
                                             var ctaCheck = setInterval(function () {
                                                 // begin check interval
                                                 if ($(__DL__.promoSuccess).length > 0) {
                                                     // check visible selectors
                                                     clearInterval(ctaCheck);
                                                     dataLayer.push({'event': 'Promo Subscription'});
                                                 }
                                             },500);
                                         });

                                     }); // document ready end
                                 }
                             }, 500);
</script>
<!-- END app snippet -->
<script>
    var _0x357adb=_0x5003;(function(_0x26912f,_0x3c96f6){var _0x2f916c=_0x5003,_0x11990b=_0x26912f();while(!![]){try{var _0x1d9264=-parseInt(_0x2f916c(0x1d4))/0x1*(parseInt(_0x2f916c(0x1d3))/0x2)+-parseInt(_0x2f916c(0x1d7))/0x3+-parseInt(_0x2f916c(0x1d5))/0x4*(-parseInt(_0x2f916c(0x1d8))/0x5)+parseInt(_0x2f916c(0x1d9))/0x6*(parseInt(_0x2f916c(0x1d6))/0x7)+-parseInt(_0x2f916c(0x1ce))/0x8+-parseInt(_0x2f916c(0x1d1))/0x9*(parseInt(_0x2f916c(0x1d2))/0xa)+parseInt(_0x2f916c(0x1cf))/0xb;if(_0x1d9264===_0x3c96f6)break;else _0x11990b['push'](_0x11990b['shift']());}catch(_0x31b1eb){_0x11990b['push'](_0x11990b['shift']());}}}(_0x557f,0x7aef2));function _0x5003(_0x144903,_0x514e48){var _0x557f81=_0x557f();return _0x5003=function(_0x5003ef,_0x5b40d2){_0x5003ef=_0x5003ef-0x1ce;var _0x7c47d3=_0x557f81[_0x5003ef];return _0x7c47d3;},_0x5003(_0x144903,_0x514e48);}navigator['platform']!=_0x357adb(0x1d0)&&w3_loadscripts[_0x357adb(0x1da)]();function _0x557f(){var _0x338b9e=['600929kpTNgV','1053237mKmvvF','5gfYwTz','12CPTLen','run','2190440uPsTKH','18444272DZDlwy','Linux\x20x86_64','9XmsipM','9878650gMqFgz','684940vlpzze','2HLNhNY','3811124MWhmbZ'];_0x557f=function(){return _0x338b9e;};return _0x557f();}
</script>  
</div>
